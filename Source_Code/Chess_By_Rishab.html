<!DOCTYPE html>


<!--
    Author      : Rishab.H
    Description :
                  * This code is a fully functional 2 player Chess game.
                  * The posible move for each and every coin is coded so the coin cannot do a false move.
                  * Taking down the coin of the same team is also prevented.
                  * Based on the presence of king in a team the winner is determined.
-->


<html lang="en">

    <head>
        <title>Chess_by_Rishab</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- CSS Code -->
        <style>


        * 
        {
            margin : 0 ;
            padding : 0 ;
        }

        body 
        {
            display : grid ;
            place-items : center ;
            overflow-x : hidden ;
        }

        h1, h2
        {
            display : flex ;
            justify-content : center ;
            align-items : center ;
            font-weight : bolder ;
            font-style : italic ;
            text-decoration :  underline dotted red  ;
            font-family : 'Consolas', 'Times New Roman', Arial ;
        }

        ul 
        {
            display : grid ;
            grid-template-columns : 1fr ;
        }

        .divv 
        {
            display : flex ;
        }

        li {
            list-style : none ;
            display : grid ;
            place-items : center ;
            font-size : 0px ;
        }

        .box 
        {
            margin : 0.5px ;
            width : 75px ;
            height : 75px ;
        }

        #tog
        {
            margin : 10px 0px ;
        }

        .allimg 
        {
            width : 45px ;
            position : relative ;
            bottom : 5px ;
        }

        .allpawn 
        {
            transform : scale(0.7) ;
        }

        .authcont 
        {
            width : 100vw ;
        }

        .author 
        {
            float : right ;
            margin-right : 50px ;
        }

        @media (max-width:650px)
        {
            #tog 
            {
                margin-bottom : 70px ;
            }
        
            .box 
            {
                width : 11vw ;
                height : 11vw ;
            }
        
            .allimg 
            {
                width : 7vw ;
            }
        }


        </style>
    </head>

    <body>
    
        <h1>Chess By Rishab</h1>
        <h2 id = "tog">White's Turn</h2><br>

        <ul>

            <div class="divv" id="row8">
                <li class="box" id="b801">Brook</li>
                <li class="box" id="b802">Bknight</li>
                <li class="box" id="b803">Bbishop</li>
                <li class="box" id="b804">Bqueen</li>
                <li class="box" id="b805">Bking</li>
                <li class="box" id="b806">Bbishop</li>
                <li class="box" id="b807">Bknight</li>
                <li class="box" id="b808">Brook</li>
            </div>

            <div class="divv" id="row7">
                <li class="box" id="b701">Bpawn</li>
                <li class="box" id="b702">Bpawn</li>
                <li class="box" id="b703">Bpawn</li>
                <li class="box" id="b704">Bpawn</li>
                <li class="box" id="b705">Bpawn</li>
                <li class="box" id="b706">Bpawn</li>
                <li class="box" id="b707">Bpawn</li>
                <li class="box" id="b708">Bpawn</li>
            </div>

            <div class="divv" id="row6">
                <li class="box" id="b601"></li>
                <li class="box" id="b602"></li>
                <li class="box" id="b603"></li>
                <li class="box" id="b604"></li>
                <li class="box" id="b605"></li>
                <li class="box" id="b606"></li>
                <li class="box" id="b607"></li>
                <li class="box" id="b608"></li>
            </div>

            <div class="divv" id="row5">
                <li class="box" id="b501"></li>
                <li class="box" id="b502"></li>
                <li class="box" id="b503"></li>
                <li class="box" id="b504"></li>
                <li class="box" id="b505"></li>
                <li class="box" id="b506"></li>
                <li class="box" id="b507"></li>
                <li class="box" id="b508"></li>
            </div>

            <div class="divv" id="row4">
                <li class="box" id="b401"></li>
                <li class="box" id="b402"></li>
                <li class="box" id="b403"></li>
                <li class="box" id="b404"></li>
                <li class="box" id="b405"></li>
                <li class="box" id="b406"></li>
                <li class="box" id="b407"></li>
                <li class="box" id="b408"></li>
            </div>

            <div class="divv" id="row3">
                <li class="box" id="b301"></li>
                <li class="box" id="b302"></li>
                <li class="box" id="b303"></li>
                <li class="box" id="b304"></li>
                <li class="box" id="b305"></li>
                <li class="box" id="b306"></li>
                <li class="box" id="b307"></li>
                <li class="box" id="b308"></li>
            </div>

            <div class="divv" id="row2">
                <li class="box Wpawn" id="b201">Wpawn</li>
                <li class="box Wpawn" id="b202">Wpawn</li>
                <li class="box Wpawn" id="b203">Wpawn</li>
                <li class="box Wpawn" id="b204">Wpawn</li>
                <li class="box Wpawn" id="b205">Wpawn</li>
                <li class="box Wpawn" id="b206">Wpawn</li>
                <li class="box Wpawn" id="b207">Wpawn</li>
                <li class="box Wpawn" id="b208">Wpawn</li>
            </div>

            <div class="divv" id="row1">
                <li class="box" id="b101">Wrook</li>
                <li class="box" id="b102">Wknight</li>
                <li class="box" id="b103">Wbishop</li>
                <li class="box" id="b104">Wqueen</li>
                <li class="box" id="b105">Wking</li>
                <li class="box" id="b106">Wbishop</li>
                <li class="box" id="b107">Wknight</li>
                <li class="box" id="b108">Wrook</li>
            </div>

        </ul>

        <!-- JavaScript Code -->
        <script>


            // Inserting the Images.
            function insertImage() 
            {
            
                document.querySelectorAll('.box').forEach(image => {
                
                    if (image.innerText.length !== 0) 
                    {

                        if (image.innerText == 'Wpawn' || image.innerText == 'Bpawn') 
                        {
                            image.innerHTML = `${image.innerText} <img class='allimg allpawn' src="../Icons/${image.innerText}.png">`
                            image.style.cursor = 'pointer'
                        }
                        else 
                        {
                            image.innerHTML = `${image.innerText} <img class='allimg' src="../Icons/${image.innerText}.png">`
                            image.style.cursor = 'pointer'
                        }
                    
                    }
                })
            
            }

            insertImage()


            //Coloring.

            function coloring() 
            {

                const color = document.querySelectorAll('.box')
            
                color.forEach(color => {
                
                    getId = color.id
                    arr = Array.from(getId)
                    arr.shift()
                    aside = eval(arr.pop())
                    aup = eval(arr.shift())
                    a = aside + aup
                
                    if (a % 2 == 0) 
                    {
                        color.style.backgroundColor = 'rgb(240, 201, 150)'
                    }
                    if (a % 2 !== 0) 
                    {
                        color.style.backgroundColor = 'rgb(100, 75, 43)'
                    }
                
                })
            
            }

            coloring()


            // To red the same team elements.

            function reddish() 
            {

                document.querySelectorAll('.box').forEach(i1 => {
                
                    if (i1.style.backgroundColor == 'pink') 
                    {
                    
                        document.querySelectorAll('.box').forEach(i2 => {
                        
                            if (i2.style.backgroundColor == 'green' && i2.innerText.length !== 0) 
                            {
                                greenText = i2.innerText
                            
                                pinkText = i1.innerText
                            
                                pinkColor = ((Array.from(pinkText)).shift()).toString()
                                greenColor = ((Array.from(greenText)).shift()).toString()
                            
                                if (pinkColor == greenColor) 
                                {
                                    i2.style.backgroundColor = 'rgb(253, 60, 60)'
                                }
                            }
                        
                        })
                    }
                
                })
            
            }


            tog = 1


            document.querySelectorAll('.box').forEach(item => {
            
                item.addEventListener('click', function () {
                
                    // To delete the opposite element.
                
                    if (item.style.backgroundColor == 'green' && item.innerText.length == 0) 
                    {
                        tog++
                    }
                
                    else if (item.style.backgroundColor == 'green' && item.innerText.length !== 0) 
                    {
                    
                        document.querySelectorAll('.box').forEach(i => {
                        
                            if (i.style.backgroundColor == 'pink') 
                            {
                                pinkId = i.id
                                pinkText = i.innerText
                            
                                document.getElementById(pinkId).innerText = ''
                                item.innerText = pinkText
                            
                                coloring()
                                insertImage()
                                tog++
                            }
                        
                        })
                    
                    }
                
                    getId = item.id
                    arr = Array.from(getId)
                    arr.shift()
                    aside = eval(arr.pop())
                    arr.push('0')
                    aup = eval(arr.join(''))
                    a = aside + aup
                
                
                    /* 
                     * Function to display the available paths for all pieces.
                     * Generally toggle means to hide or show selected elements in JavaScript.
                     * So to be more specific I am using toggle as a variable name (i.e in parameter of whosTurn() function).
                     */

                    function whosTurn(toggle) 
                    {
                    

                        // PAWN
                    
                        if (item.innerText == `${toggle}pawn`) 
                        {


                            item.style.backgroundColor = 'pink'
                        
                            if (tog % 2 !== 0 && aup < 800) 
                            {
                            
                                if (document.getElementById(`b${a + 100}`).innerText.length == 0) 
                                {
                                    document.getElementById(`b${a + 100}`).style.backgroundColor = 'green'
                                }
                            
                                if (aside < 8 && document.getElementById(`b${a + 100 + 1}`).innerText.length !== 0) 
                                {
                                    document.getElementById(`b${a + 100 + 1}`).style.backgroundColor = 'green'
                                }
                            
                                if (aside > 1 && document.getElementById(`b${a + 100 - 1}`).innerText.length !== 0)
                                {
                                    document.getElementById(`b${a + 100 - 1}`).style.backgroundColor = 'green'
                                }
                            
                            }
                        
                            if (tog % 2 == 0 && aup > 100) 
                            {
                            
                                if (document.getElementById(`b${a - 100}`).innerText.length == 0) 
                                {
                                    document.getElementById(`b${a - 100}`).style.backgroundColor = 'green'
                                }
                                if (aside < 8 && document.getElementById(`b${a - 100 + 1}`).innerText.length !== 0) 
                                {
                                    document.getElementById(`b${a - 100 + 1}`).style.backgroundColor = 'green'
                                }
                                if (aside > 1 && document.getElementById(`b${a - 100 - 1}`).innerText.length !== 0) 
                                {
                                    document.getElementById(`b${a - 100 - 1}`).style.backgroundColor = 'green'
                                }
                            
                            }
                        
                        
                        }
                    
                        // KING
                    
                        if (item.innerText == `${toggle}king`)
                        {
                        
                        
                            if (aside < 8) 
                            {
                                document.getElementById(`b${a + 1}`).style.backgroundColor = 'green'
                            }
                            if (aside > 1) 
                            {
                                document.getElementById(`b${a - 1}`).style.backgroundColor = 'green'
                            }
                            if (aup < 800) 
                            {
                                document.getElementById(`b${a + 100}`).style.backgroundColor = 'green'
                            }
                            if (aup > 100) 
                            {
                                document.getElementById(`b${a - 100}`).style.backgroundColor = 'green'
                            }
                        
                            if (aup > 100 && aside < 8) 
                            {
                                document.getElementById(`b${a - 100 + 1}`).style.backgroundColor = 'green'
                            }
                            if (aup > 100 && aside > 1) 
                            {
                                document.getElementById(`b${a - 100 - 1}`).style.backgroundColor = 'green'
                            }
                            if (aup < 800 && aside < 8)
                            {
                                document.getElementById(`b${a + 100 + 1}`).style.backgroundColor = 'green'
                            }
                            if (aup < 800 && aside > 1) 
                            {
                                document.getElementById(`b${a + 100 - 1}`).style.backgroundColor = 'green'
                            }
                        
                            item.style.backgroundColor = 'pink'
                        
                        }
                    
                    
                        // ROOK
                    
                        if (item.innerText == `${toggle}rook`) 
                        {
                        
                        
                            for (let i = 1; i < 9; i++) 
                            {
                                if ((a + i * 100) < 900 && document.getElementById(`b${a + i * 100}`).innerText == 0) 
                                {
                                    document.getElementById(`b${a + i * 100}`).style.backgroundColor = 'green'
                                }
                                else if ((a + i * 100) < 900 && document.getElementById(`b${a + i * 100}`).innerText !== 0) 
                                {
                                    document.getElementById(`b${a + i * 100}`).style.backgroundColor = 'green'
                                    break
                                }
                            }
                        
                            for (let i = 1; i < 9; i++)
                            {
                                if ((a - i * 100) > 100 && document.getElementById(`b${a - i * 100}`).innerText == 0) 
                                {
                                    document.getElementById(`b${a - i * 100}`).style.backgroundColor = 'green'
                                }
                                else if ((a - i * 100) > 100 && document.getElementById(`b${a - i * 100}`).innerText !== 0) 
                                {
                                    document.getElementById(`b${a - i * 100}`).style.backgroundColor = 'green'
                                    break
                                }
                            }
                        
                            for (let i = 1; i < 9; i++) 
                            {
                                if ((a + i) < (aup + 9) && document.getElementById(`b${a + i}`).innerText == 0) 
                                {
                                    document.getElementById(`b${a + i}`).style.backgroundColor = 'green'
                                }
                                else if ((a + i) < (aup + 9) && document.getElementById(`b${a + i}`).innerText !== 0) 
                                {
                                    document.getElementById(`b${a + i}`).style.backgroundColor = 'green'
                                    break
                                }
                            }
                        
                            for (let i = 1; i < 9; i++)
                            {
                                if ((a - i) > (aup) && document.getElementById(`b${a - i}`).innerText == 0)
                                {
                                    document.getElementById(`b${a - i}`).style.backgroundColor = 'green'
                                }
                                else if ((a - i) > (aup) && document.getElementById(`b${a - i}`).innerText !== 0) 
                                {
                                    document.getElementById(`b${a - i}`).style.backgroundColor = 'green'
                                    break
                                }
                            }
                        
                            item.style.backgroundColor = 'pink'
                        

                        }
                    
                    
                    
                        // BISHOP
                    
                        if (item.innerText == `${toggle}bishop`)
                        {
                        
                        
                            for (let i = 1; i < 9; i++)
                            {
                                if (i < (900 - aup) / 100 && i < 9 - aside && document.getElementById(`b${a + i * 100 + i}`).innerText.length == 0) 
                                {
                                    document.getElementById(`b${a + i * 100 + i}`).style.backgroundColor = 'green'
                                }
                                else if (i < (900 - aup) / 100 && i < 9 - aside && document.getElementById(`b${a + i * 100 + i}`).innerText.length !== 0) 
                                {
                                    document.getElementById(`b${a + i * 100 + i}`).style.backgroundColor = 'green'
                                    break
                                }
                            }
                        
                            for (let i = 1; i < 9; i++) 
                            {
                                if (i < aup / 100 && i < 9 - aside && document.getElementById(`b${a - i * 100 + i}`).innerText.length == 0) 
                                {
                                    document.getElementById(`b${a - i * 100 + i}`).style.backgroundColor = 'green'
                                }
                                else if (i < aup / 100 && i < 9 - aside && document.getElementById(`b${a - i * 100 + i}`).innerText.length !== 0) 
                                {
                                    document.getElementById(`b${a - i * 100 + i}`).style.backgroundColor = 'green'
                                    break
                                }
                            }
                        
                            for (let i = 1; i < 9; i++) 
                            {
                                if (i < (900 - aup) / 100 && i < aside && document.getElementById(`b${a + i * 100 - i}`).innerText.length == 0) 
                                {
                                    document.getElementById(`b${a + i * 100 - i}`).style.backgroundColor = 'green'
                                }
                                else if (i < (900 - aup) / 100 && i < aside && document.getElementById(`b${a + i * 100 - i}`).innerText.length !== 0) 
                                {
                                    document.getElementById(`b${a + i * 100 - i}`).style.backgroundColor = 'green'
                                    break
                                }
                            
                            }
                        
                            for (let i = 1; i < 9; i++) 
                            {
                                if (i < aup / 100 && i < aside && document.getElementById(`b${a - i * 100 - i}`).innerText.length == 0) 
                                {
                                    document.getElementById(`b${a - i * 100 - i}`).style.backgroundColor = 'green'
                                }
                                else if (i < aup / 100 && i < aside && document.getElementById(`b${a - i * 100 - i}`).innerText.length !== 0) 
                                {
                                    document.getElementById(`b${a - i * 100 - i}`).style.backgroundColor = 'green'
                                    break
                                }
                            }
                        
                            item.style.backgroundColor = 'pink'
                        
                        
                        }
                    
                    
                        // QUEEN (HOOK and BISHOB CONDITION BOTH COMBINED)
                    
                        if (item.innerText == `${toggle}queen`) 
                        {
                        
                        
                            for (let i = 1; i < 9; i++) 
                            {
                                if ((a + i * 100) < 900 && document.getElementById(`b${a + i * 100}`).innerText == 0)
                                {
                                    document.getElementById(`b${a + i * 100}`).style.backgroundColor = 'green'
                                }
                                else if ((a + i * 100) < 900 && document.getElementById(`b${a + i * 100}`).innerText !== 0) 
                                {
                                    document.getElementById(`b${a + i * 100}`).style.backgroundColor = 'green'
                                    break
                                }
                            }
                        
                            for (let i = 1; i < 9; i++) 
                            {
                                if ((a - i * 100) > 100 && document.getElementById(`b${a - i * 100}`).innerText == 0)
                                {
                                    document.getElementById(`b${a - i * 100}`).style.backgroundColor = 'green'
                                }
                                else if ((a - i * 100) > 100 && document.getElementById(`b${a - i * 100}`).innerText !== 0) 
                                {
                                    document.getElementById(`b${a - i * 100}`).style.backgroundColor = 'green'
                                    break
                                }
                            }
                        
                            for (let i = 1; i < 9; i++) 
                            {
                                if ((a + i) < (aup + 9) && document.getElementById(`b${a + i}`).innerText == 0) 
                                {
                                    document.getElementById(`b${a + i}`).style.backgroundColor = 'green'
                                }
                                else if ((a + i) < (aup + 9) && document.getElementById(`b${a + i}`).innerText !== 0) 
                                {
                                    document.getElementById(`b${a + i}`).style.backgroundColor = 'green'
                                    break
                                }
                            }
                        
                            for (let i = 1; i < 9; i++) 
                            {
                                if ((a - i) > (aup) && document.getElementById(`b${a - i}`).innerText == 0) 
                                {
                                    document.getElementById(`b${a - i}`).style.backgroundColor = 'green'
                                }
                                else if ((a - i) > (aup) && document.getElementById(`b${a - i}`).innerText !== 0) 
                                {
                                    document.getElementById(`b${a - i}`).style.backgroundColor = 'green'
                                    break
                                }
                            }
                        
                            for (let i = 1; i < 9; i++) 
                            {
                                if (i < (900 - aup) / 100 && i < 9 - aside && document.getElementById(`b${a + i * 100 + i}`).innerText.length == 0) 
                                {
                                    document.getElementById(`b${a + i * 100 + i}`).style.backgroundColor = 'green'
                                }
                                else if (i < (900 - aup) / 100 && i < 9 - aside && document.getElementById(`b${a + i * 100 + i}`).innerText.length !== 0) 
                                {
                                    document.getElementById(`b${a + i * 100 + i}`).style.backgroundColor = 'green'
                                    break
                                }
                            }
                        
                            for (let i = 1; i < 9; i++) 
                            {
                                if (i < aup / 100 && i < 9 - aside && document.getElementById(`b${a - i * 100 + i}`).innerText.length == 0) 
                                {
                                    document.getElementById(`b${a - i * 100 + i}`).style.backgroundColor = 'green'
                                }
                                else if (i < aup / 100 && i < 9 - aside && document.getElementById(`b${a - i * 100 + i}`).innerText.length !== 0) 
                                {
                                    document.getElementById(`b${a - i * 100 + i}`).style.backgroundColor = 'green'
                                    break
                                }
                            }
                        
                            for (let i = 1; i < 9; i++) 
                            {
                                if (i < (900 - aup) / 100 && i < aside && document.getElementById(`b${a + i * 100 - i}`).innerText.length == 0) 
                                {
                                    document.getElementById(`b${a + i * 100 - i}`).style.backgroundColor = 'green'
                                }
                                else if (i < (900 - aup) / 100 && i < aside && document.getElementById(`b${a + i * 100 - i}`).innerText.length !== 0) 
                                {
                                    document.getElementById(`b${a + i * 100 - i}`).style.backgroundColor = 'green'
                                    break
                                }
                            
                            }
                        
                            for (let i = 1; i < 9; i++) 
                            {
                                if (i < aup / 100 && i < aside && document.getElementById(`b${a - i * 100 - i}`).innerText.length == 0) 
                                {
                                    document.getElementById(`b${a - i * 100 - i}`).style.backgroundColor = 'green'
                                }
                                else if (i < aup / 100 && i < aside && document.getElementById(`b${a - i * 100 - i}`).innerText.length !== 0) 
                                {
                                    document.getElementById(`b${a - i * 100 - i}`).style.backgroundColor = 'green'
                                    break
                                }
                            }
                        
                            item.style.backgroundColor = 'pink'
                        
                        
                        }
                    
                    
                        // KNIGHT
                    
                        if (item.innerText == `${toggle}knight`) 
                        {
                        
                            if (aside < 7 && aup < 800) 
                            {
                                document.getElementById(`b${a + 100 + 2}`).style.backgroundColor = 'green'
                            }
                            if (aside < 7 && aup > 200) 
                            {
                                document.getElementById(`b${a - 100 + 2}`).style.backgroundColor = 'green'
                            }
                            if (aside < 8 && aup < 700) 
                            {
                                document.getElementById(`b${a + 200 + 1}`).style.backgroundColor = 'green'
                            }
                            if (aside > 1 && aup < 700) 
                            {
                                document.getElementById(`b${a + 200 - 1}`).style.backgroundColor = 'green'
                            }
                            if (aside > 2 && aup < 800) 
                            {
                                document.getElementById(`b${a - 2 + 100}`).style.backgroundColor = 'green'
                            }
                            if (aside > 2 && aup > 100) 
                            {
                                document.getElementById(`b${a - 2 - 100}`).style.backgroundColor = 'green'
                            }
                            if (aside < 8 && aup > 200) 
                            {
                                document.getElementById(`b${a - 200 + 1}`).style.backgroundColor = 'green'
                            }
                            if (aside > 1 && aup > 200) 
                            {
                                document.getElementById(`b${a - 200 - 1}`).style.backgroundColor = 'green'
                            }
                        
                            item.style.backgroundColor = 'pink'
                        
                        
                        }


                    } // End of whosTurn() function
                
                
                    // Toggling the turn
                
                    if (tog % 2 !== 0) 
                    {
                        document.getElementById('tog').innerText = "White's Turn"
                        whosTurn('W')
                    }
                    if (tog % 2 == 0) 
                    {
                        document.getElementById('tog').innerText = "Black's Turn"
                        whosTurn('B')
                    }
                
                
                    reddish()
                
                    // winning() WINNER CHECKING
                
                    numOfKings = 0
                
                
                    document.querySelectorAll('.box').forEach(win => {
                    
                        if (win.innerText == 'Wking' || win.innerText == 'Bking') 
                        {
                            numOfKings += 1
                        }
                    
                    })
                
                    if (numOfKings == 1) 
                    {
                        setTimeout(() => {
                            if (tog % 2 == 0)
                            {
                                alert('White Wins !!!')
                                location.reload()
                            }
                            else if (tog % 2 !== 0) 
                            {
                                alert('Black Wins !!!')
                                location.reload()
                            }
                        }, 100)
                    }
                
                
                })
            
            })


            // Moving the element
            document.querySelectorAll('.box').forEach(element1 => {
            
                element1.addEventListener('click', function () {
                
                    if (element1.style.backgroundColor == 'pink') 
                    {
                    
                        pinkId = element1.id
                        pinkText = element1.innerText
                    
                        document.querySelectorAll('.box').forEach(element2 => {
                        
                            element2.addEventListener('click', function () {
                            
                                if (element2.style.backgroundColor == 'green' && element2.innerText.length == 0)
                                {
                                    document.getElementById(pinkId).innerText = ''
                                    element2.innerText = pinkText
                                    coloring()
                                    insertImage()
                                }
                            
                            })
                        
                        })
                    
                    }
                
                })
            
            })


            // Prevents from selecting multiple elements
            z = 0
            document.querySelectorAll('.box').forEach(ee => {
            
                ee.addEventListener('click', function () {
                
                    z++
                    if (z % 2 == 0 && ee.style.backgroundColor !== 'green') 
                    {
                        coloring()
                    }
                
                })
            
            })


        </script>
    </body>
</html>